(()=>{"use strict";var t={d:(e,n)=>{for(var s in n)t.o(n,s)&&!t.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:n[s]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},e={};t.r(e),t.d(e,{ssr_converter:()=>P});const n=class{el;components;child;firstBonder;secondBonder;name;curPos;oldPos;root;state;constructor({name:t,state:e}){this.components=[],this.child=[],this.name=t,this.state=e,this.curPos=0,this.oldPos=0,this.firstBonder=this.eventHandler.bind(this),this.secondBonder=this.secondEventHandler.bind(this)}setState(t){this.state=t,this.components.length>0&&this.components[this.curPos].setState(t),this.child.length>0&&this.child.map((e=>e.setState(t)))}setRoot(t){this.root||(this.root=t),this.el=this.root.querySelector(`#${this.name}`),this.components.length>0&&this.components[this.curPos].setRoot(t),this.child.length>0&&this.child.map((e=>e.setRoot(t))),this.setEvent()}setEvent(){}eventHandler(){}secondEventHandler(){}template(){let t="";return this.components.length>0&&(t=this.components[this.curPos].template()),this.child.length>0&&(t=this.child.map((t=>t.template())).join("")),`\n      <div id=${this.name}>\n        ${t}\n      </div>\n    `}render(){this.el.innerHTML=this.template(),requestAnimationFrame((()=>this.setRoot()))}};class s extends n{constructor({name:t,state:e}){super({name:t,state:e}),this.child=[],this.child.push(new a({name:"postlistheader",state:e})),this.child.push(new l({name:"postlist",state:e})),this.child.push(new c({name:"pagebutton",state:e}))}}class a extends n{child;constructor({name:t,state:e}){super({name:t,state:e}),this.child=[],this.child.push(new i({name:"search",state:e})),this.child.push(new o({name:"paging",state:e})),this.child.push(new r({name:"sorting",state:e})),this.child.push(new d({name:"sortbutton",state:e}))}}class i extends n{template(){return`\n    <div data-component="search" id="search">\n      <input \n        data-action='searchInput' \n        placeholder="search" \n        type="text" \n        value=${this.state.filter||""}>\n      <button data-action='searchBtn'>검색</button>\n    </div>\n  `}}class o extends n{template(){const t=Number(this.state.size);return`\n      <div data-component=paging id="paging">\n        <label for="pagination" value=${t}>페이지</label>\n          <select data-action ="page">\n          <option value=5 ${5===t?"selected":""}>5</option>\n          <option value=10 ${10===t?"selected":""}>10</option>\n          <option value=20 ${20===t?"selected":""}>20</option>\n        </select>\n      </div>\n    `}}class r extends n{template(){const t=this.state.order;return`\n    <div data-component='sorting' id="sorting">\n      <label for="sorting">날짜정렬</label>\n      <select data-action="order">\n        <option \n            name='order' value="dsc" \n            ${"dsc"===t?"selected":""}>최신</option>\n        <option \n            name='order' value="asc"\n            ${"asc"===t?"selected":""}>예전</option>\n      </select>\n    </div>`}}class d extends n{template(){return'\n      <div id="sortbutton">\n        <button data-action = \'all\' id="refreshall">초기화</button>\n        <button data-action = \'page\' id="refreshpage">새로고침</button>\n      </div>\n    '}}class l extends n{template(){const t=this.state.data,e=""!==this.state.name?"class='writer-on'":"";return`\n    \n      <div id='postlist'>\n        <ul>\n          <li>글번호</li>\n          <li data-action='title'>제목</li>\n          <li>작성자</li>\n          <li>작성일</li>\n        </ul>\n        ${0===t.length?"":t.map(((t,n)=>`\n          <ul data-index=${t.id}>  \n            <li id= ${t.id}>${t.id}</li>\n            <li data-action='title'>${t.title}</li>\n            <li data-action='writer' ${e} >${t.writer}</li>\n            <li>${t.date.split("T")[0]}</li>\n          </ul>`)).join("")}\n      </div>`}}class c extends n{constructor({name:t,state:e}){super({name:t,state:e}),this.child=[],this.child.push(new p({name:"pagination-button",state:e})),this.child.push(new h({name:"postbutton",state:e}))}}class h extends n{template(){return"\n      <div id=postbutton>\n        <button>글 작성</button>\n      </div>\n    "}}class p extends n{page;group;template(){const{page:t,size:e,total:n,data:s}=this.state,a=Number(t)>1,i=Number(e)*Number(t)<Number(n);return`\n      <div id=pagination-button>\n      ${0===Number(n)?'<span class="none-display">"게시글이 존재 하지 않습니다."</span>':""}\n      ${a?'<button data-action="less">이전</button>':""}\n      ${i?'<button data-action="more">더보기</button>':""}\n      ${Number(n)&&!i?'<span class="none-display">"마지막 페이지 입니다"</span>':""}\n      </div>\n    `}}const u={index:0,setIndex(t){this.index=t}};class m extends n{child;constructor({name:t,state:e}){super({name:t,state:e}),this.child=[],this.child.push(new b({name:"header",state:e})),this.child.push(new v({name:"contents",state:e})),this.child.push(new g({name:"bottombutton",state:e}))}}class b extends n{template(){const t=u.index,e=this.state.data.filter((e=>e.id===Number(t)))[0];return`\n      <header id="header">\n        <div class='single-header'>\n          <span>글번호</span>\n          <span>제목</span>\n          <span>작성자</span>\n          <span>날짜</span>\n        </div>\n        ${e&&0!==e.length?`<div class='single-content'>\n              <span>${e.id}</span>\n              <span>${e.title}</span>\n              <span>${e.writer}</span>\n              <span>${e.date.split("T")[0]}</span>\n            </div>`:""}\n      </header>\n    `}}class v extends n{template(){const t=u.index,e=this.state.data.filter((e=>e.id===Number(t)))[0];return`\n      <div id="contents">\n        ${e&&0!==e.length?`<textarea cols="50" rows="20" name ='content' readonly>${e.content}</textarea>`:"<div> 게시글이 존재하지 않습니다.</div>"}\n      </div>\n    `}}class g extends n{template(){return'\n      <div id="bottombutton">\n      <button data-action="list">목록</button>\n        <button data-action="edit">수정</button>\n        <button data-action="delete">삭제</button>\n      </div>\n    '}}class x extends n{constructor({name:t,state:e}){super({name:t,state:e})}template(){return'\n    <div id="notfoundpage">NOT FOUND PAGE \n        <p>요청하신 페이지를 찾을 수 없습니다. </p>\n        <button>홈으로 돌아가기</button>\n    </div>\n    '}}class $ extends n{child;constructor({name:t,state:e}){super({name:t,state:e}),this.child=[],this.child.push(new w({name:"contents",state:e}))}}class w extends n{template(){let t;return data,u.index&&(t=u.index,data=this.state.data.filter((e=>e.id===Number(t)))[0]),data=null,`\n      <div id="contents">\n        <form action='/api/post' method='post' id='form'>\n          <fieldset>\n            <p name=${data?data.id:""}> 제 목\n              <input \n              data-action='title'\n              type='text',\n              name = 'title'\n              value=${data?data.title:""}\n              >\n            </p>\n            <p> 작성자\n              <input\n              data-action='writer'\n              type='text'\n              name='writer'\n              value=${data?data.writer:""}\n              >\n            </p> \n            <textarea data-action = 'contents' cols="50" rows="20" name ='content'>${data?data.content:""}</textarea>\n            <input style="display:none;" name=id value = ${data?data.id:""} >\n            <button data-action='submit'>제출</button>\n          </fieldset>\n        </form>\n      </div>\n    `}}const f=new class extends n{constructor({name:t,state:e}){super({name:t,state:e}),this.components.push(new s({name:"postlistpage",state:e})),this.components.push(new m({name:"postsingle",state:e})),this.components.push(new $({name:"posteditpage",state:e})),this.components.push(new x({name:"notfoundpage",state:e}))}}({name:"app"}),y=(t,e,n=!1)=>{const s=new class{routes;base;index;root;app;cur;eventBounder;constructor(){this.cur=0,this.routeState={value:""}}subscribe(t){this.app=t}setRoutes(t){this.routes=t}setRoot(t){this.root||t||(this.root=document.querySelector("#root")),this.root||(this.root=t);try{this.app.setRoot(this.root),this.app.onLoad()}catch(t){if(t instanceof TypeError)return this.serverRender()}}setIndex(t){this.index=Number(t)}setPathCur(t,e=!1){t="/list"===t?"/":t,this.cur=this.routes.filter((e=>e.path===t))[0].comPosition,this.app.curPos=this.cur,e||(location.search.includes("index")&&this.setIndex(location.search.split("=")[1]),this.templateRender())}templateRender(){this.root.innerHTML=this.app.template(),this.setRoot(this.root)}serverRender(){return this.app.template()}};return s.subscribe(e),s.setRoutes([{path:"/",comPosition:0},{path:"/post-single",comPosition:1},{path:"/post-edit",comPosition:2},{path:"/nout-found",comPosition:3}]),n||s.setRoot(document.querySelector("#root")),s};function P(t){return new Promise((async(e,n)=>{let s,{url:a,state:i,index:o}=t;const r=y(0,f,!0);try{f.setState(i),r.setPathCur(a,!0),1!==r.cur&&2!==r.cur||u.setIndex(Number(o)),s=r.serverRender()}catch(t){r.setPathCur("/nout-found",!0),s=r.serverRender()}return s?e(s):n(new Error("SSR error"))}))}module.exports.SSR=e})();
//# sourceMappingURL=ssr.js.map