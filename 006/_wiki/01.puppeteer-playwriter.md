# 01. Crawler; Puppeteer vs. Playwriter

- reference: [Playwright vs. Puppeteer: Which should you choose? (2020.04.27.)](https://blog.logrocket.com/playwright-vs-puppeteer/)

## Historical Backgrounds

Selenium은 왜 사라지고 있는가?

- 무거운 리소스; 실제 브라우저를 작동시킴
- 대안으로 headless browser 사용; PhantomJS 등
  - 그러나 다양한 웹표준을 지원하지 않는 문제
  - 2017년 PhantomJS 지원 중단
  - 크롬과 파이어폭스에서 직접 Headless Broser 지원 시작

## Puppeteer; 인형극

- 구글에서 headless 크롬 공개하며 함께 릴리즈
- 크롬, 크로미움 기반 작동, 설치할 때 기본적으로 크로미움 설치
- WebDriver protocol을 사용해 브라우저마다 각각의 드라이버를 설치해야하는 Selenium과는 반대로, nonstandard DevTools protocol 사용해 브라우저를 직접 조작

## Playwright; 극작가

- 마이크로소프트; Puppeteer 팀이 구글에서 MS로 이직해 만듦
  - API 대부분 동일
- 크로스 브라우저 지원; Puppeteer와 가장 큰 차이점
  - 크로미움, WebKit, Firefox 지원
  - 다만 WebKit, Firefox의 경우 실제 렌더링 엔진이 아닌 디버깅 프로토콜 패치만 하기 때문에 문제가 있을 수 있음
- 브라우저 컨텍스트 기능
  - 여러 장치 시뮬레이션 가능
  - 칵 컨텍스트별로 cookie, localStorage

### 예시코드

```javascript
const { chromium, devices } = require("playwright");

(async () => {
  const browser = await chromium.launch();

  for (const deviceName of ["iPhone 11", "iPad Pro 11"]) {
    const context = await browser.newContext({
      ...devices[deviceName],
    });
    const page = await context.newPage();
    await page.goto("http://github.com");
    await page.screenshot({
      path: `github-${deviceName.replace(/ /g, "-")}.png`,
    });
  }

  await browser.close();
})();
```
